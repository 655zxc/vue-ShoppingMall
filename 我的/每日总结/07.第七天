2021.12.9

P67-P73

31.开发details模块:加入购物车

31.1.表单
获得表单数据:v-model,ref,e.target
处理用户输入:
带有字符的数据*1会得到NaN
如果是NaN或者小于则变为,用parseInt处理小数

[个人难点,搞懂promise和async/await]31.2.加入购物车
给加入购物车绑定click事件
发送dispatch请求(发送购买产品信息),服务器不会返回data数据,只会告诉你存储成功,因此vuex不需要存state
dispatch会调通actions里的shoppingCart函数,他是一个async函数,可以接收它的返回值promise
如果promise成功,进行路由跳转
如果promise失败,打印失败信息

和前面有点不一样,前面不需要判断,直接路由跳转,然后向服务器传递参数,然后展示
这里是先向服务器传递参数,判断成功与否,成功再路由跳转

路由跳转后,页面要展示刚才选的商品的信息,需要路由传参 
但是,这个地方传商品信息,要传的数据太多了,之前的路由传参都是些简单的数据
那么如何不用路由传参,也能在将要跳转的路由中获得参数?

这种复杂的参数,采用会话(浏览器关了就没了)存储
本地存储和会话存储只能存字符串

关于dispatch的参数:
不能传递多个参数,应该把多个参数放到一个对象里传递,在actions的函数中通过解构赋值获取

32.开发AddCartSuccess模块:
本模块有两个功能
32.1.查看商品详情
点击,回到刚才的商品页面,因此需要路由跳转,参数为刚才商品的id
32.2.去购物车结算
路由跳转至购物车组件

